<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAHADA FOOD - ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…ÙˆØ¸Ù</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø®Ø¯Ù…Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙˆØ®Ø¯Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
    <script src="print-service.js"></script>
    <script src="order-service.js"></script>
    <style>
        :root {
            --primary-color: #8B4513;
            --primary-dark: #5D2906;
            --primary-light: #A05D2E;
            --secondary-color: #4caf50;
            --background-dark: #121212;
            --background-paper: #1e1e1e;
            --border-color: #333;
            --border-radius: 12px;
            --box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--background-dark);
            color: white;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .app-bar {
            background-color: var(--primary-color);
            padding: 12px 20px;
            display: flex;
            align-items: center;
        }

        .back-button {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            margin-left: 15px;
        }

        .app-title {
            font-size: 20px;
            font-weight: 600;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-right: auto;
        }

        #user-name {
            font-weight: 500;
            color: #ddd;
        }

        .logout-button {
            background-color: transparent;
            color: #ddd;
            border: 1px solid #444;
            border-radius: 4px;
            padding: 5px 10px;
            font-size: 14px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .logout-button:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .cashier-container {
            display: flex;
            height: calc(100vh - 56px);
        }

        .menu-section {
            flex: 3;
            padding: 20px;
            overflow-y: auto;
        }

        .order-section {
            flex: 2;
            padding: 20px;
            background-color: var(--background-paper);
            border-right: 1px solid var(--border-color);
        }

        .menu-categories {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 25px;
        }

        .category-chip {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 18px 15px;
            background-color: white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            width: calc(20% - 12px);
            min-width: 90px;
            border: 1px solid #eee;
            color: #333;
        }

        .category-chip:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            border-color: var(--primary-color);
        }

        .category-chip.active {
            background-color: var(--primary-color);
            color: white;
        }

        .category-chip.active i {
            color: white;
        }

        .category-chip.active span {
            color: white;
        }

        .category-chip i {
            font-size: 28px;
            color: var(--primary-color);
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .category-chip span {
            font-size: 14px;
            font-weight: 500;
            color: #333;
            text-align: center;
            transition: all 0.3s ease;
        }

        .menu-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 16px;
        }

        .menu-item {
            background-color: var(--background-paper);
            border-radius: var(--border-radius);
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            animation: fadeIn 0.5s ease-out;
            animation-fill-mode: both;
        }

        .menu-item:hover {
            transform: scale(1.05);
        }

        .menu-item-image {
            height: 140px;
            background-color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            position: relative;
            overflow: hidden;
            border-radius: 8px 8px 0 0;
        }

        .menu-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .menu-item:hover .menu-item-image img {
            transform: scale(1.1);
        }

        .menu-item-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--primary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            z-index: 1;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .menu-item-content {
            padding: 16px;
        }

        .menu-item-title {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .menu-item-price {
            color: #aaa;
        }

        .order-title {
            font-size: 20px;
            margin-bottom: 16px;
        }

        .customer-form {
            margin-bottom: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #ddd;
            font-weight: 500;
            font-size: 14px;
        }

        .form-group label i {
            margin-left: 5px;
            color: var(--primary-color);
        }

        .toggle-container {
            display: flex;
            align-items: center;
            margin-top: 5px;
        }

        .toggle-input {
            display: none;
        }

        .toggle-label {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
            background-color: #555;
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition);
        }

        .toggle-label:after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: white;
            top: 2px;
            left: 2px;
            transition: var(--transition);
        }

        .toggle-input:checked + .toggle-label {
            background-color: var(--primary-color);
        }

        .toggle-input:checked + .toggle-label:after {
            left: 28px;
        }

        .toggle-text {
            margin-right: 10px;
            font-size: 14px;
            color: #ddd;
        }

        .printer-config {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 10px;
        }

        .printer-option {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .printer-option label {
            font-size: 14px;
            color: #ddd;
            margin-bottom: 0;
        }

        .form-select {
            width: 120px;
            padding: 6px 10px;
            background-color: #333;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            color: white;
            font-family: 'Tajawal', 'Cairo', sans-serif;
        }

        .customer-input {
            width: 100%;
            padding: 12px;
            background-color: #333;
            border: 1px solid #444;
            border-radius: 8px;
            color: white;
            font-family: 'Tajawal', 'Cairo', sans-serif;
            transition: all 0.3s ease;
        }

        .customer-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(255, 152, 0, 0.2);
            outline: none;
        }

        .divider {
            height: 1px;
            background-color: var(--border-color);
            margin: 16px 0;
        }

        .empty-cart {
            text-align: center;
            color: #aaa;
            margin: 40px 0;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
            animation: slideIn 0.3s ease-out;
            animation-fill-mode: both;
            transition: var(--transition);
        }

        .cart-item:hover {
            background-color: rgba(139, 69, 19, 0.1);
            padding-right: 10px;
            border-radius: 8px;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 500;
        }

        .cart-item-price {
            color: #aaa;
            font-size: 14px;
        }

        .cart-item-actions {
            display: flex;
            align-items: center;
        }

        .quantity-button {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            background-color: #333;
            color: white;
            cursor: pointer;
        }

        .quantity-text {
            margin: 0 10px;
        }

        .remove-button {
            margin-right: 10px;
            background: none;
            border: none;
            color: #f44336;
            cursor: pointer;
            font-size: 18px;
        }

        .total-section {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            font-size: 18px;
            font-weight: 600;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .action-button {
            flex: 1;
            padding: 12px;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Tajawal', 'Cairo', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .checkout-button {
            background-color: var(--primary-color);
        }

        .checkout-button:hover:not(:disabled) {
            background-color: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .checkout-button:active:not(:disabled) {
            animation: pulse 0.3s ease-in-out;
        }

        .clear-button {
            background-color: #f44336;
        }

        .clear-button:hover {
            background-color: #d32f2f;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .send-button {
            background-color: #e67e22;
            color: white;
        }

        .send-button:hover:not(:disabled) {
            background-color: #d35400;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .send-button:active:not(:disabled) {
            animation: pulse 0.3s ease-in-out;
        }

        .print-buttons {
            display: flex;
            gap: 10px;
        }

        .print-button, .pdf-button {
            flex: 1;
            padding: 10px;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Tajawal', 'Cairo', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .print-button {
            background-color: #2196f3;
        }

        .print-button:hover:not(:disabled) {
            background-color: #1976d2;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .print-button:active:not(:disabled) {
            animation: pulse 0.3s ease-in-out;
        }

        .pdf-button {
            background-color: #4caf50;
        }

        .pdf-button:hover:not(:disabled) {
            background-color: #388e3c;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .pdf-button:active:not(:disabled) {
            animation: pulse 0.3s ease-in-out;
        }

        .action-button:disabled, .print-button:disabled, .pdf-button:disabled {
            background-color: #555;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: var(--background-paper);
            border-radius: 8px;
            padding: 20px;
            width: 400px;
            max-width: 90%;
        }

        .modal-title {
            font-size: 20px;
            margin-bottom: 15px;
        }

        .modal-body {
            margin-bottom: 20px;
        }

        .modal-actions {
            display: flex;
            justify-content: flex-end;
        }

        .modal-button {
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
        }

        .primary-button {
            background-color: var(--primary-color);
            color: white;
        }

        .secondary-button {
            background-color: #555;
            color: white;
            margin-right: 10px;
        }

        .secondary-button:hover {
            background-color: #444;
        }
    </style>
</head>
<body>
    <div class="app-bar">
        <button class="back-button" onclick="window.location.href='index-static.html'">â†</button>
        <div class="app-title">MAHADA FOOD - ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…ÙˆØ¸Ù</div>
        <div class="user-info">
            <span id="user-name">Ù…Ø³ØªØ®Ø¯Ù…</span>
            <button class="logout-button" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
            </button>
        </div>
    </div>

    <div class="cashier-container">
        <div class="menu-section">
            <div class="menu-categories">
                <button class="category-chip active" onclick="filterCategory('all')">
                    <i class="fas fa-th-large"></i>
                    <span>Ø§Ù„ÙƒÙ„</span>
                </button>
                <button class="category-chip" onclick="filterCategory('sandwiches')">
                    <i class="fas fa-hamburger"></i>
                    <span>Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´Ø§Øª</span>
                </button>
                <button class="category-chip" onclick="filterCategory('meals')">
                    <i class="fas fa-utensils"></i>
                    <span>ÙˆØ¬Ø¨Ø§Øª</span>
                </button>
                <button class="category-chip" onclick="filterCategory('drinks')">
                    <i class="fas fa-glass-whiskey"></i>
                    <span>Ù…Ø´Ø±ÙˆØ¨Ø§Øª</span>
                </button>
                <button class="category-chip" onclick="filterCategory('desserts')">
                    <i class="fas fa-ice-cream"></i>
                    <span>Ø­Ù„ÙˆÙŠØ§Øª</span>
                </button>
            </div>

            <div class="menu-items">
                <!-- Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´Ø§Øª -->
                <div class="menu-item" data-category="sandwiches" onclick="addToCart(1, 'Ø´Ø§ÙˆØ±Ù…Ø§ Ø¯Ø¬Ø§Ø¬', 350)">
                    <div class="menu-item-image">
                        <img src="https://images.unsplash.com/photo-1550547660-d9450f859349?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Ø´Ø§ÙˆØ±Ù…Ø§ Ø¯Ø¬Ø§Ø¬">
                        <div class="menu-item-badge">Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹</div>
                    </div>
                    <div class="menu-item-content">
                        <div class="menu-item-title">Ø´Ø§ÙˆØ±Ù…Ø§ Ø¯Ø¬Ø§Ø¬</div>
                        <div class="menu-item-price">350 Ø¯Ø¬</div>
                    </div>
                </div>

                <div class="menu-item" data-category="sandwiches" onclick="addToCart(2, 'Ø´Ø§ÙˆØ±Ù…Ø§ Ù„Ø­Ù…', 400)">
                    <div class="menu-item-image">
                        <img src="https://images.unsplash.com/photo-1633321702518-7feccafb94d5?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Ø´Ø§ÙˆØ±Ù…Ø§ Ù„Ø­Ù…">
                    </div>
                    <div class="menu-item-content">
                        <div class="menu-item-title">Ø´Ø§ÙˆØ±Ù…Ø§ Ù„Ø­Ù…</div>
                        <div class="menu-item-price">400 Ø¯Ø¬</div>
                    </div>
                </div>

                <div class="menu-item" data-category="sandwiches" onclick="addToCart(3, 'Ø¨Ø±Ø¬Ø± Ù„Ø­Ù…', 450)">
                    <div class="menu-item-image">
                        <img src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Ø¨Ø±Ø¬Ø± Ù„Ø­Ù…">
                    </div>
                    <div class="menu-item-content">
                        <div class="menu-item-title">Ø¨Ø±Ø¬Ø± Ù„Ø­Ù…</div>
                        <div class="menu-item-price">450 Ø¯Ø¬</div>
                    </div>
                </div>

                <!-- Ù…Ø´Ø±ÙˆØ¨Ø§Øª -->
                <div class="menu-item" data-category="drinks" onclick="addToCart(6, 'Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„', 200)">
                    <div class="menu-item-image">
                        <img src="https://images.unsplash.com/photo-1600271886742-f049cd451bba?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„">
                    </div>
                    <div class="menu-item-content">
                        <div class="menu-item-title">Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„</div>
                        <div class="menu-item-price">200 Ø¯Ø¬</div>
                    </div>
                </div>

                <div class="menu-item" data-category="drinks" onclick="addToCart(9, 'Ù…ÙŠØ§Ù‡ Ù…Ø¹Ø¯Ù†ÙŠØ©', 80)">
                    <div class="menu-item-image">
                        <img src="https://images.unsplash.com/photo-1548839140-29a749e1cf4d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Ù…ÙŠØ§Ù‡ Ù…Ø¹Ø¯Ù†ÙŠØ©">
                    </div>
                    <div class="menu-item-content">
                        <div class="menu-item-title">Ù…ÙŠØ§Ù‡ Ù…Ø¹Ø¯Ù†ÙŠØ©</div>
                        <div class="menu-item-price">80 Ø¯Ø¬</div>
                    </div>
                </div>

                <!-- ÙˆØ¬Ø¨Ø§Øª -->
                <div class="menu-item" data-category="meals" onclick="addToCart(4, 'Ø·Ø¨Ù‚ Ø´Ø§ÙˆØ±Ù…Ø§ Ù…Ø´ÙƒÙ„', 650)">
                    <div class="menu-item-image">
                        <img src="https://images.unsplash.com/photo-1529006557810-274b9b2fc783?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Ø·Ø¨Ù‚ Ø´Ø§ÙˆØ±Ù…Ø§ Ù…Ø´ÙƒÙ„">
                        <div class="menu-item-badge">Ø¬Ø¯ÙŠØ¯</div>
                    </div>
                    <div class="menu-item-content">
                        <div class="menu-item-title">Ø·Ø¨Ù‚ Ø´Ø§ÙˆØ±Ù…Ø§ Ù…Ø´ÙƒÙ„</div>
                        <div class="menu-item-price">650 Ø¯Ø¬</div>
                    </div>
                </div>

                <!-- Ø­Ù„ÙˆÙŠØ§Øª -->
                <div class="menu-item" data-category="desserts" onclick="addToCart(5, 'ÙƒÙ†Ø§ÙØ©', 300)">
                    <div class="menu-item-image">
                        <img src="https://images.unsplash.com/photo-1579954115545-a95591f28bfc?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="ÙƒÙ†Ø§ÙØ©">
                    </div>
                    <div class="menu-item-content">
                        <div class="menu-item-title">ÙƒÙ†Ø§ÙØ©</div>
                        <div class="menu-item-price">300 Ø¯Ø¬</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="order-section">
            <h2 class="order-title">Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ</h2>

            <div class="customer-form">
                <div class="form-group">
                    <label for="customerName"><i class="fas fa-user"></i> Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†</label>
                    <input type="text" id="customerName" class="customer-input" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ø²Ø¨ÙˆÙ†">
                </div>
                <div class="form-group">
                    <label for="customerPhone"><i class="fas fa-phone"></i> Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                    <input type="text" id="customerPhone" class="customer-input" placeholder="Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø§Ù„Ø²Ø¨ÙˆÙ†">
                </div>
                <div class="form-group">
                    <label for="cashierName"><i class="fas fa-id-card"></i> Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ø´ÙŠØ±</label>
                    <select id="cashierName" class="customer-input">
                        <option value="Ù…Ø­Ù…Ø¯">Ù…Ø­Ù…Ø¯</option>
                        <option value="Ø£Ø­Ù…Ø¯">Ø£Ø­Ù…Ø¯</option>
                        <option value="ÙØ§Ø·Ù…Ø©">ÙØ§Ø·Ù…Ø©</option>
                        <option value="Ø¹Ø§Ø¦Ø´Ø©">Ø¹Ø§Ø¦Ø´Ø©</option>
                        <option value="Ø®Ø§Ù„Ø¯">Ø®Ø§Ù„Ø¯</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="autoPrint"><i class="fas fa-print"></i> Ø·Ø¨Ø§Ø¹Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©</label>
                    <div class="toggle-container">
                        <input type="checkbox" id="autoPrint" class="toggle-input" checked>
                        <label for="autoPrint" class="toggle-label"></label>
                        <span class="toggle-text">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù„Ù„Ù…Ø·Ø¨Ø®</span>
                    </div>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-cog"></i> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø·Ø§Ø¨Ø¹Ø©</label>
                    <div class="printer-config">
                        <div class="printer-option">
                            <label for="cashierPrinter">Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„ÙƒØ§Ø´ÙŠØ±</label>
                            <select id="cashierPrinter" class="form-select">
                                <option value="1" selected>Ø·Ø§Ø¨Ø¹Ø© 1</option>
                                <option value="2">Ø·Ø§Ø¨Ø¹Ø© 2</option>
                            </select>
                        </div>
                        <div class="printer-option">
                            <label for="kitchenPrinter">Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø·Ø¨Ø®</label>
                            <select id="kitchenPrinter" class="form-select">
                                <option value="1">Ø·Ø§Ø¨Ø¹Ø© 1</option>
                                <option value="2" selected>Ø·Ø§Ø¨Ø¹Ø© 2</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="divider"></div>

            <div id="empty-cart" class="empty-cart">
                Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ø¹Ù†Ø§ØµØ± Ø¨Ø¹Ø¯
            </div>

            <div id="cart-items" style="display: none;">
                <!-- Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù‡Ù†Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
            </div>

            <div class="divider"></div>

            <div class="total-section">
                <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span>
                <span id="total-price">0 Ø¯Ø¬</span>
            </div>

            <div class="action-buttons">
                <button id="clear-button" class="action-button clear-button" onclick="clearOrder()">
                    <i class="fas fa-trash"></i> Ù…Ø³Ø­ Ø§Ù„Ø·Ù„Ø¨
                </button>

                <button id="send-to-kitchen-button" class="action-button send-button" disabled onclick="sendToKitchen()">
                    <i class="fas fa-utensils"></i> Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ù…Ø·Ø¨Ø®
                </button>

                <button id="checkout-button" class="action-button checkout-button" disabled onclick="showOrderCompleteModal()">
                    <i class="fas fa-check-circle"></i> ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨
                </button>
            </div>

            <div class="print-buttons">
                <button id="print-button" class="print-button" disabled onclick="printCurrentOrder()">
                    <i class="fas fa-print"></i> Ø·Ø¨Ø§Ø¹Ø©
                </button>

                <button id="pdf-button" class="pdf-button" disabled onclick="generatePDF()">
                    <i class="fas fa-file-pdf"></i> ØªØ­Ù…ÙŠÙ„ PDF
                </button>
            </div>

            <!-- Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ -->
            <div id="order-complete-modal" class="modal">
                <div class="modal-content">
                    <h2 class="modal-title">ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­</h2>
                    <div class="modal-body">
                        <p>ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨ Ø±Ù‚Ù… <span id="order-number">19</span> Ø¨Ù†Ø¬Ø§Ø­</p>
                        <p id="confirmation-text" style="color: #aaa; margin-top: 10px;">ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø·Ø¨Ø® ÙˆØ·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©</p>
                    </div>
                    <div class="modal-actions">
                        <button class="modal-button primary-button" onclick="startNewOrder()">Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</button>
                        <button class="modal-button secondary-button" onclick="document.getElementById('order-complete-modal').style.display = 'none'">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø·Ù„Ø¨</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        window.addEventListener('load', function() {
            const currentUser = localStorage.getItem('currentUser');

            if (!currentUser) {
                // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ ØªÙˆØ¬ÙŠÙ‡Ù‡ Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                window.location.href = 'login.html';
                return;
            }

            const user = JSON.parse(currentUser);

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            if (user.type !== 'cashier' && user.type !== 'admin') {
                alert('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©');
                window.location.href = 'login.html';
                return;
            }

            // Ø¹Ø±Ø¶ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
            document.getElementById('user-name').textContent = user.fullName;

            // ØªØ¹ÙŠÙŠÙ† Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ø´ÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            const cashierSelect = document.getElementById('cashierName');
            for (let i = 0; i < cashierSelect.options.length; i++) {
                if (cashierSelect.options[i].value === user.username) {
                    cashierSelect.selectedIndex = i;
                    break;
                }
            }

            // ØªØ¹Ø·ÙŠÙ„ ØªØºÙŠÙŠØ± Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ø´ÙŠØ±
            cashierSelect.disabled = true;
        });

        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
        function logout() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø±ØºØ¨ØªÙƒ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
                localStorage.removeItem('currentUser');
                window.location.href = 'login.html';
            }
        }

        // Ù…ØªØºÙŠØ±Ø§Øª Ø¹Ø§Ù…Ø©
        let cart = [];
        let orderNumber = 19;

        // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©
        function addToCart(id, name, price) {
            const existingItem = cart.find(item => item.id === id);

            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id,
                    name,
                    price,
                    quantity: 1
                });
            }

            updateCartUI();
        }

        // ØªØ­Ø¯ÙŠØ« ÙƒÙ…ÙŠØ© Ù…Ù†ØªØ¬ ÙÙŠ Ø§Ù„Ø³Ù„Ø©
        function updateQuantity(id, change) {
            const item = cart.find(item => item.id === id);
            if (item) {
                item.quantity = Math.max(1, item.quantity + change);
                updateCartUI();
            }
        }

        // Ø¥Ø²Ø§Ù„Ø© Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ø³Ù„Ø©
        function removeItem(id) {
            cart = cart.filter(item => item.id !== id);
            updateCartUI();
        }

        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹
        function calculateTotal() {
            return cart.reduce((total, item) => total + (item.price * item.quantity), 0);
        }

        // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø³Ù„Ø©
        function updateCartUI() {
            const emptyCartElement = document.getElementById('empty-cart');
            const cartItemsElement = document.getElementById('cart-items');
            const totalPriceElement = document.getElementById('total-price');
            const checkoutButton = document.getElementById('checkout-button');
            const sendToKitchenButton = document.getElementById('send-to-kitchen-button');

            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø³Ù„Ø© (ÙØ§Ø±ØºØ© Ø£Ùˆ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¹Ù†Ø§ØµØ±)
            if (cart.length === 0) {
                emptyCartElement.style.display = 'block';
                cartItemsElement.style.display = 'none';
                checkoutButton.disabled = true;
                sendToKitchenButton.disabled = true;
            } else {
                emptyCartElement.style.display = 'none';
                cartItemsElement.style.display = 'block';
                checkoutButton.disabled = false;
                sendToKitchenButton.disabled = false;

                // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø³Ù„Ø©
                cartItemsElement.innerHTML = '';
                cart.forEach(item => {
                    const cartItemElement = document.createElement('div');
                    cartItemElement.className = 'cart-item';
                    cartItemElement.innerHTML = `
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price">${item.price} Ø¯Ø¬ Ã— ${item.quantity} = ${item.price * item.quantity} Ø¯Ø¬</div>
                        </div>
                        <div class="cart-item-actions">
                            <button class="quantity-button" onclick="updateQuantity(${item.id}, -1)">-</button>
                            <span class="quantity-text">${item.quantity}</span>
                            <button class="quantity-button" onclick="updateQuantity(${item.id}, 1)">+</button>
                            <button class="remove-button" onclick="removeItem(${item.id})">ğŸ—‘ï¸</button>
                        </div>
                    `;
                    cartItemsElement.appendChild(cartItemElement);
                });
            }

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹
            totalPriceElement.textContent = calculateTotal() + ' Ø¯Ø¬';

            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
            document.getElementById('print-button').disabled = cart.length === 0;
            document.getElementById('pdf-button').disabled = cart.length === 0;
        }

        // ØªØµÙÙŠØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©
        function filterCategory(category) {
            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            const categoryButtons = document.querySelectorAll('.category-chip');
            categoryButtons.forEach(button => {
                button.classList.remove('active');
                if (button.textContent === getCategoryName(category)) {
                    button.classList.add('active');
                }
            });

            // ØªØµÙÙŠØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(item => {
                if (category === 'all' || item.dataset.category === category) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„ÙØ¦Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
        function getCategoryName(category) {
            switch (category) {
                case 'all': return 'Ø§Ù„ÙƒÙ„';
                case 'sandwiches': return 'Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´Ø§Øª';
                case 'meals': return 'ÙˆØ¬Ø¨Ø§Øª';
                case 'drinks': return 'Ù…Ø´Ø±ÙˆØ¨Ø§Øª';
                case 'desserts': return 'Ø­Ù„ÙˆÙŠØ§Øª';
                default: return '';
            }
        }

        // Ù…Ø³Ø­ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
        function clearOrder() {
            if (cart.length === 0) {
                alert('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ© Ø¨Ø§Ù„ÙØ¹Ù„!');
                return;
            }

            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø±ØºØ¨ØªÙƒ ÙÙŠ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù…Ù† Ø§Ù„Ø³Ù„Ø©ØŸ')) {
                cart = [];
                updateCartUI();
            }
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨
        function showOrderCompleteModal() {
            // Ø¥Ù†Ø´Ø§Ø¡ ÙƒØ§Ø¦Ù† Ø§Ù„Ø·Ù„Ø¨
            const customerName = document.getElementById('customerName').value;
            const customerPhone = document.getElementById('customerPhone').value;
            const cashierName = document.getElementById('cashierName').value;
            const autoPrint = document.getElementById('autoPrint').checked;

            if (!customerName) {
                alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ† Ø§Ù„ÙƒØ§Ù…Ù„');
                document.getElementById('customerName').focus();
                return;
            }

            const order = {
                orderNumber: orderNumber,
                customerName: customerName,
                customerPhone: customerPhone || 'ØºÙŠØ± Ù…ØªÙˆÙØ±',
                employee: cashierName,
                items: cart,
                createdAt: new Date().toISOString(),
                status: 'pending'
            };

            // Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙÙŠ Ù…ØªØºÙŠØ± Ø¹Ø§Ù…
            currentOrder = order;

            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø·Ø§Ø¨Ø¹Ø©
            const cashierPrinterId = document.getElementById('cashierPrinter').value;
            const kitchenPrinterId = document.getElementById('kitchenPrinter').value;

            // ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø·Ø§Ø¨Ø¹Ø§Øª
            const cashierPrinter = {
                name: 'Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„ÙƒØ§Ø´ÙŠØ±',
                id: parseInt(cashierPrinterId),
                description: 'Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±'
            };

            const kitchenPrinter = {
                name: 'Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø·Ø¨Ø®',
                id: parseInt(kitchenPrinterId),
                description: 'Ø·Ø§Ø¨Ø¹Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ø®'
            };

            // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙˆÙˆØ±Ù‚Ø© Ø§Ù„Ù…Ø·Ø¨Ø® ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            if (autoPrint) {
                try {
                    console.log('Ø¨Ø¯Ø¡ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙˆØ·Ù„Ø¨ Ø§Ù„Ù…Ø·Ø¨Ø® ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹...');

                    // Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
                    const printOptions = {
                        autoPrint: true,
                        maxRetries: 3,
                        silent: true // Ø¹Ø¯Ù… Ø¹Ø±Ø¶ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ (Ø³ÙŠØªÙ… Ø¹Ø±Ø¶Ù‡Ø§ ÙÙŠ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯)
                    };

                    // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¹Ù„Ù‰ Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„ÙƒØ§Ø´ÙŠØ±
                    const receiptResult = printReceipt(order, cashierPrinter, printOptions);

                    if (receiptResult) {
                        console.log('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© Ø¨Ù†Ø¬Ø§Ø­');

                        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø©
                        if (receiptResult.fallback) {
                            console.log('ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø© Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');
                        }
                    } else {
                        console.error('ÙØ´Ù„ ÙÙŠ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');
                    }

                    // Ø·Ø¨Ø§Ø¹Ø© ÙˆØ±Ù‚Ø© Ø§Ù„Ù…Ø·Ø¨Ø® Ø¹Ù„Ù‰ Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø·Ø¨Ø®
                    const kitchenResult = printKitchenOrder(order, kitchenPrinter, printOptions);

                    if (kitchenResult) {
                        console.log('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø·Ø¨Ø® Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© Ø¨Ù†Ø¬Ø§Ø­');

                        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø©
                        if (kitchenResult.fallback) {
                            console.log('ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø© Ù„Ø·Ø¨Ø§Ø¹Ø© Ø·Ù„Ø¨ Ø§Ù„Ù…Ø·Ø¨Ø®');
                        }
                    } else {
                        console.error('ÙØ´Ù„ ÙÙŠ Ø·Ø¨Ø§Ø¹Ø© Ø·Ù„Ø¨ Ø§Ù„Ù…Ø·Ø¨Ø®');
                    }
                } catch (error) {
                    console.error('Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©:', error);
                }
            }

            // Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨
            const modal = document.getElementById('order-complete-modal');
            document.getElementById('order-number').textContent = orderNumber;

            // ØªØ­Ø¯ÙŠØ« Ù†Øµ Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
            const confirmationText = document.getElementById('confirmation-text');
            if (autoPrint) {
                confirmationText.textContent = 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø·Ø¨Ø® ÙˆØ·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹';
            } else {
                confirmationText.textContent = 'ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹';
            }

            modal.style.display = 'flex';
        }

        // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
        function printCurrentOrder() {
            if (cart.length === 0) {
                alert('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± ÙÙŠ Ø§Ù„Ø³Ù„Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©!');
                return;
            }

            const customerName = document.getElementById('customerName').value;
            const customerPhone = document.getElementById('customerPhone').value;
            const cashierName = document.getElementById('cashierName').value;
            const autoPrint = document.getElementById('autoPrint').checked;

            if (!customerName) {
                alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ† Ø§Ù„ÙƒØ§Ù…Ù„');
                document.getElementById('customerName').focus();
                return;
            }

            const order = {
                orderNumber: orderNumber,
                customerName: customerName,
                customerPhone: customerPhone || 'ØºÙŠØ± Ù…ØªÙˆÙØ±',
                employee: cashierName,
                items: cart,
                createdAt: new Date().toISOString(),
                status: 'pending'
            };

            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø·Ø§Ø¨Ø¹Ø©
            const cashierPrinterId = document.getElementById('cashierPrinter').value;
            const kitchenPrinterId = document.getElementById('kitchenPrinter').value;

            // ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø·Ø§Ø¨Ø¹Ø§Øª
            const cashierPrinter = {
                name: 'Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„ÙƒØ§Ø´ÙŠØ±',
                id: parseInt(cashierPrinterId),
                description: 'Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±'
            };

            const kitchenPrinter = {
                name: 'Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø·Ø¨Ø®',
                id: parseInt(kitchenPrinterId),
                description: 'Ø·Ø§Ø¨Ø¹Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ø®'
            };

            try {
                console.log('Ø¨Ø¯Ø¡ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ...');

                // Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
                const printOptions = {
                    autoPrint: true,
                    maxRetries: 3
                };

                // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¹Ù„Ù‰ Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„ÙƒØ§Ø´ÙŠØ±
                const receiptResult = printReceipt(order, cashierPrinter, printOptions);

                if (receiptResult) {
                    console.log('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© Ø¨Ù†Ø¬Ø§Ø­');

                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø©
                    if (receiptResult.fallback) {
                        console.log('ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø© Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');
                    }
                } else {
                    console.error('ÙØ´Ù„ ÙÙŠ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');
                    // Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ø³ØªØ¸Ù‡Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø®Ù„Ø§Ù„ ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
                }

                // Ø·Ø¨Ø§Ø¹Ø© ÙˆØ±Ù‚Ø© Ø§Ù„Ù…Ø·Ø¨Ø® Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ù…ÙØ¹Ù„
                if (autoPrint) {
                    // Ø·Ø¨Ø§Ø¹Ø© ÙˆØ±Ù‚Ø© Ø§Ù„Ù…Ø·Ø¨Ø® Ø¹Ù„Ù‰ Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø·Ø¨Ø®
                    const kitchenResult = printKitchenOrder(order, kitchenPrinter, printOptions);

                    if (kitchenResult) {
                        console.log('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø·Ø¨Ø® Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© Ø¨Ù†Ø¬Ø§Ø­');

                        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø©
                        if (kitchenResult.fallback) {
                            console.log('ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø© Ù„Ø·Ø¨Ø§Ø¹Ø© Ø·Ù„Ø¨ Ø§Ù„Ù…Ø·Ø¨Ø®');
                        }
                    } else {
                        console.error('ÙØ´Ù„ ÙÙŠ Ø·Ø¨Ø§Ø¹Ø© Ø·Ù„Ø¨ Ø§Ù„Ù…Ø·Ø¨Ø®');
                        // Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ø³ØªØ¸Ù‡Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø®Ù„Ø§Ù„ ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
                    }
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
            }
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù PDF
        function generatePDF() {
            if (cart.length === 0) {
                alert('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± ÙÙŠ Ø§Ù„Ø³Ù„Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ PDF!');
                return;
            }

            const customerName = document.getElementById('customerName').value;
            const customerPhone = document.getElementById('customerPhone').value;
            const cashierName = document.getElementById('cashierName').value;

            if (!customerName) {
                alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ† Ø§Ù„ÙƒØ§Ù…Ù„');
                document.getElementById('customerName').focus();
                return;
            }

            const order = {
                orderNumber: orderNumber,
                customerName: customerName,
                customerPhone: customerPhone || 'ØºÙŠØ± Ù…ØªÙˆÙØ±',
                employee: cashierName,
                items: cart,
                createdAt: new Date().toISOString(),
                status: 'pending'
            };

            try {
                console.log('Ø¨Ø¯Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù PDF...');

                // Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
                const printOptions = {
                    autoPrint: false, // Ø¹Ø¯Ù… Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
                    maxRetries: 3
                };

                // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„ÙƒØ§Ø´ÙŠØ±
                const printer = {
                    name: 'Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„ÙƒØ§Ø´ÙŠØ±',
                    id: parseInt(document.getElementById('cashierPrinter').value),
                    description: 'Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±'
                };

                // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙØ§ØªÙˆØ±Ø©
                const receiptContent = generateReceiptContent(order);

                // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ù…Ø¹ ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
                const printResult = openPrintWindow(receiptContent, 'ÙØ§ØªÙˆØ±Ø© Ù„Ù„ØªØ­Ù…ÙŠÙ„', false, printer);

                if (printResult) {
                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø©
                    if (printResult.fallback) {
                        console.log('ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ PDF');
                    }

                    // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
                    alert('ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®ÙŠØ§Ø± "Ø­ÙØ¸ ÙƒÙ€ PDF" Ø£Ùˆ "Ø·Ø¨Ø§Ø¹Ø© Ø¥Ù„Ù‰ PDF" Ù…Ù† Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙƒÙ…Ù„Ù PDF');
                } else {
                    console.error('ÙØ´Ù„ ÙÙŠ ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø¥Ù†Ø´Ø§Ø¡ PDF');
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù PDF. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù PDF:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù PDF. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
            }
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø·Ø¨Ø®
        function sendToKitchen() {
            try {
                console.log('Ø¨Ø¯Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø·Ø¨Ø®...');

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¹Ù†Ø§ØµØ± ÙÙŠ Ø§Ù„Ø³Ù„Ø©
                if (cart.length === 0) {
                    alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ÙØ§Ø±Øº Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø·Ø¨Ø®');
                    return;
                }

                // Ø¥Ù†Ø´Ø§Ø¡ ÙƒØ§Ø¦Ù† Ø§Ù„Ø·Ù„Ø¨
                const customerName = document.getElementById('customerName').value || 'Ø²Ø¨ÙˆÙ†';
                const customerPhone = document.getElementById('customerPhone').value || 'ØºÙŠØ± Ù…ØªÙˆÙØ±';
                const cashierName = document.getElementById('cashierName').value;

                const order = {
                    customerName: customerName,
                    customerPhone: customerPhone,
                    employee: cashierName,
                    items: [...cart], // Ù†Ø³Ø®Ø© Ù…Ù† Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø³Ù„Ø©
                    status: 'temp',
                    createdAt: new Date().toISOString()
                };

                // Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª
                const savedOrder = saveTempOrder(order);

                // Ù†Ù‚Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©
                const movedOrder = moveOrderToPending(savedOrder.id);

                if (movedOrder) {
                    console.log('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø·Ø¨Ø® Ø¨Ù†Ø¬Ø§Ø­:', movedOrder);

                    // Ø·Ø¨Ø§Ø¹Ø© ÙˆØ±Ù‚Ø© Ø§Ù„Ù…Ø·Ø¨Ø®
                    const autoPrint = document.getElementById('autoPrint').checked;

                    if (autoPrint) {
                        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø·Ø§Ø¨Ø¹Ø©
                        const kitchenPrinterId = document.getElementById('kitchenPrinter').value;

                        // ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø·Ø§Ø¨Ø¹Ø©
                        const kitchenPrinter = {
                            name: 'Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø·Ø¨Ø®',
                            id: parseInt(kitchenPrinterId),
                            description: 'Ø·Ø§Ø¨Ø¹Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ø®'
                        };

                        // Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
                        const printOptions = {
                            autoPrint: true,
                            maxRetries: 3,
                            silent: true
                        };

                        // Ø·Ø¨Ø§Ø¹Ø© ÙˆØ±Ù‚Ø© Ø§Ù„Ù…Ø·Ø¨Ø®
                        const kitchenResult = printKitchenOrder(movedOrder, kitchenPrinter, printOptions);

                        if (kitchenResult) {
                            console.log('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø·Ø¨Ø® Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© Ø¨Ù†Ø¬Ø§Ø­');
                        } else {
                            console.error('ÙØ´Ù„ ÙÙŠ Ø·Ø¨Ø§Ø¹Ø© Ø·Ù„Ø¨ Ø§Ù„Ù…Ø·Ø¨Ø®');
                        }
                    }

                    // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯
                    alert(`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø±Ù‚Ù… ${movedOrder.orderNumber} Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø·Ø¨Ø® Ø¨Ù†Ø¬Ø§Ø­`);

                    // Ø¨Ø¯Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
                    startNewOrder();
                } else {
                    console.error('ÙØ´Ù„ ÙÙŠ Ù†Ù‚Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©');
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø·Ø¨Ø®. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø·Ø¨Ø®:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø·Ø¨Ø®. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
            }
        }

        // Ø¨Ø¯Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
        function startNewOrder() {
            cart = [];
            orderNumber++;
            updateCartUI();
            document.getElementById('customerName').value = '';
            document.getElementById('customerPhone').value = '';
            document.getElementById('order-complete-modal').style.display = 'none';

            // Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ø´ÙŠØ± ÙˆØ¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
            // Ù„Ø§ Ù†Ù‚ÙˆÙ… Ø¨Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ… Ù„ØªØ³Ù‡ÙŠÙ„ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ©
        }

        // Ù…ØªØºÙŠØ± Ø¹Ø§Ù… Ù„Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
        let currentOrder = null;
    </script>
</body>
</html>
